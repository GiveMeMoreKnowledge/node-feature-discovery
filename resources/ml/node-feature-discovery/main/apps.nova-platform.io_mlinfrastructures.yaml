apiVersion: apps.nova-platform.io/v1alpha1
kind: MLInfrastructure
metadata:
  name: nova-ml-infrastructure
  labels:
    app.kubernetes.io/name: nova-apps-operator
    app.kubernetes.io/managed-by: kustomize
spec:
  nvidiaGpuOperator:
    mig:
      enabled: false
      strategy: single
      configs:
        - name: five-1g-one-2g
          devices:
            - all
          mig-devices:
            "1g.10gb": 5
            "2g.20gb": 1
    timeSlicing:
      enabled: false
      configs:
        - name: any
          config:
            version: v1
            flags:
              migStrategy: none
            sharing:
              timeSlicing:
                renameByDefault: false
                failRequestsGreaterThanOne: false
                resources:
                  - name: nvidia.com/gpu
                    replicas: 4
  nvidiaNetworkOperator:
    enabled: false
